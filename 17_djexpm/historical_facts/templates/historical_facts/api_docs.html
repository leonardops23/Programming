<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - Hechos Históricos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{% url 'home' %}">
                <i class="fas fa-scroll"></i> Hechos Históricos - API
            </a>
        </div>
    </nav>

    <div class="container my-5">
        <h1>Documentación de la API</h1>
        <p class="lead">API REST para la gestión de hechos históricos</p>

        <div class="row">
            <div class="col-md-3">
                <div class="list-group">
                    <a href="#overview" class="list-group-item list-group-item-action">Resumen</a>
                    <a href="#auth" class="list-group-item list-group-item-action">Autenticación</a>
                    <a href="#categories" class="list-group-item list-group-item-action">Categorías</a>
                    <a href="#facts" class="list-group-item list-group-item-action">Hechos Históricos</a>
                    <a href="#search" class="list-group-item list-group-item-action">Búsqueda</a>
                </div>
            </div>
            
            <div class="col-md-9">
                <section id="overview">
                    <h2>Resumen</h2>
                    <p>La API de Hechos Históricos permite gestionar y consultar información sobre eventos históricos importantes.</p>
                    <p><strong>URL Base:</strong> <code>{{ request.build_absolute_uri }}/api/</code></p>
                </section>

                <section id="auth" class="mt-5">
                    <h2>Autenticación</h2>
                    <p>La API soporta autenticación por token. Para endpoints que requieren autenticación, incluye el header:</p>
                    <pre><code class="language-http">Authorization: Token tu_token_aqui</code></pre>
                </section>

                <section id="categories" class="mt-5">
                    <h2>Categorías</h2>
                    
                    <h3>Listar categorías</h3>
                    <pre><code class="language-http">GET /api/categories/</code></pre>
                    
                    <h3>Crear categoría</h3>
                    <pre><code class="language-http">POST /api/categories/
Content-Type: application/json

{
    "name": "Nueva Categoría",
    "description": "Descripción de la categoría"
}</code></pre>

                    <h3>Obtener categoría específica</h3>
                    <pre><code class="language-http">GET /api/categories/{id}/</code></pre>
                </section>

                <section id="facts" class="mt-5">
                    <h2>Hechos Históricos</h2>
                    
                    <h3>Listar hechos históricos</h3>
                    <pre><code class="language-http">GET /api/facts/</code></pre>
                    <p><strong>Parámetros de consulta:</strong></p>
                    <ul>
                        <li><code>category</code> - Filtrar por ID de categoría</li>
                        <li><code>is_featured</code> - Filtrar hechos destacados (true/false)</li>
                        <li><code>search</code> - Buscar en título, descripción o ubicación</li>
                        <li><code>ordering</code> - Ordenar por campo (-date, title, etc.)</li>
                    </ul>

                    <h3>Crear hecho histórico</h3>
                    <pre><code class="language-http">POST /api/facts/create/
Authorization: Token tu_token_aqui
Content-Type: application/json

{
    "title": "Nuevo Evento Histórico",
    "description": "Descripción detallada del evento",
    "date": "2023-01-01",
    "location": "Ciudad, País",
    "category": 1,
    "is_featured": false
}</code></pre>

                    <h3>Obtener hecho específico</h3>
                    <pre><code class="language-http">GET /api/facts/{id}/</code></pre>

                    <h3>Hechos destacados</h3>
                    <pre><code class="language-http">GET /api/facts/featured/</code></pre>
                </section>

                <section id="search" class="mt-5">
                    <h2>Búsqueda Avanzada</h2>
                    <pre><code class="language-http">GET /api/search/?q=revolucion&category=1&featured=true</code></pre>
                    
                    <h3>Estadísticas</h3>
                    <pre><code class="language-http">GET /api/stats/</code></pre>
                </section>

                <section class="mt-5">
                    <h2>Códigos de Respuesta</h2>
                    <ul>
                        <li><code>200</code> - OK</li>
                        <li><code>201</code> - Creado</li>
                        <li><code>400</code> - Solicitud incorrecta</li>
                        <li><code>401</code> - No autorizado</li>
                        <li><code>404</code> - No encontrado</li>
                        <li><code>500</code> - Error del servidor</li>
                    </ul>
                </section>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
